(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-103ee9a0"],{"04b9":function(e,t,a){"use strict";var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multiSelectOdd"},[t("van-popup",{staticStyle:{height:"50%"},attrs:{round:"",position:"bottom"},on:{closed:e.multiSelectOddReturn_},model:{value:e.multiSelect_show,callback:function(t){e.multiSelect_show=t},expression:"multiSelect_show"}},[t("div",{staticClass:"multiSelectOdd_content"},[t("div",{staticClass:"multiSelectOdd_content_div"},[t("p",{staticClass:"multiSelectOdd_content_line0"},[e._v("请选择")]),e._l(e.list,(function(a){return t("p",{key:a.name,staticClass:"multiSelectOdd_content_line",on:{click:function(t){return e.multiSelectOddReturn(a)}}},[e._v(e._s(a.name))])}))],2),t("div",{staticClass:"close"},[t("div",{staticStyle:{height:"10px",background:"#e6e6e6","margin-bottom":"15px"}}),t("div",{on:{click:e.multiSelectOddReturn_}},[e._v("取消")])])])])],1)},i=[],o={props:["multiSelectOddData","name"],data(){return{multiSelect_show:!0,list:this.multiSelectOddData,name:this.name?this.name:"选择所属街道？",multiSelectOddObj:{status:!1,id:"",name:""}}},created(){},mounted(){},methods:{multiSelectOddReturn_(){let e=this;e.$emit("multiSelectOddReturn",{status:!1})},multiSelectOddReturn(e){let t=this;t.multiSelectOddObj.name=e.name,t.multiSelectOddObj.id=e.id,t.$emit("multiSelectOddReturn",t.multiSelectOddObj)}}},c=o,s=(a("67f9"),a("2877")),n=Object(s["a"])(c,l,i,!1,null,"4493de27",null);t["a"]=n.exports},"5df0":function(e,t,a){"use strict";a("7504")},"67f9":function(e,t,a){"use strict";a("f9eb")},"6e53":function(e,t,a){"use strict";var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multiSelect"},[t("van-popup",{staticStyle:{height:"50%"},attrs:{closeable:"",round:"",position:"bottom"},on:{closed:e.multiSelectClose},model:{value:e.multiSelect_show,callback:function(t){e.multiSelect_show=t},expression:"multiSelect_show"}},[t("van-checkbox-group",{attrs:{"icon-size":"20px"},model:{value:e.multiSelect_value,callback:function(t){e.multiSelect_value=t},expression:"multiSelect_value"}},e._l(e.multiSelect_Data,(function(a){return t("van-checkbox",{key:a.id,attrs:{name:a.id}},[e._v(e._s(a.name))])})),1)],1)],1)},i=[],o=(a("14d9"),{props:["multiSelectData"],data(){return{multiSelect_show:!0,multiSelect_Data:this.multiSelectData.data.length>0?this.multiSelectData.data:[],multiSelect_value:this.multiSelectData.value}},created(){},mounted(){},methods:{multiSelectClose(){let e=this,t=[];e.multiSelect_Data&&e.multiSelect_Data.length>0&&e.multiSelect_value&&e.multiSelect_value.length>0&&e.multiSelect_Data.map((a,l)=>{e.multiSelect_value.map((e,l)=>{a.id==e&&t.push(a.name)})}),e.$emit("multiSelectClose",{data:e.multiSelect_value,status:!1,nameArr:t})}}}),c=o,s=a("2877"),n=Object(s["a"])(c,l,i,!1,null,"7855c86c",null);t["a"]=n.exports},7504:function(e,t,a){},7547:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reportedAdd_warp multiSelectClass mapClass"},[t("div",{staticClass:"form",class:e.edit?"":"unclick"},[t("div",{staticClass:"item"},[t("p",{class:e.formData.sourceType?"active":""},[e._v("反馈类型")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.sourceName,expression:"formData.sourceName"}],attrs:{readonly:"",type:"text",placeholder:"请选择反馈类型"},domProps:{value:e.formData.sourceName},on:{click:e.selectSource,input:function(t){t.target.composing||e.$set(e.formData,"sourceName",t.target.value)}}}),e.multiSelectOddShow_source?t("multiSelectOdd",{attrs:{multiSelectOddData:e.sourceList,name:e.selectTypeName},on:{multiSelectOddReturn:e.multiSelectOddReturn_sourceList}}):e._e()],1)]),t("div",{staticClass:"item"},[t("p",{class:e.formData.sourceType?"active":""},[e._v("反馈模块")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.moduleName,expression:"formData.moduleName"}],attrs:{readonly:"",type:"text",placeholder:"请选择反馈模块"},domProps:{value:e.formData.moduleName},on:{click:e.selectModule,input:function(t){t.target.composing||e.$set(e.formData,"moduleName",t.target.value)}}}),e.multiSelectOddShow_module?t("multiSelectOdd",{attrs:{multiSelectOddData:e.moduleIdList,name:e.selectTypeName},on:{multiSelectOddReturn:e.multiSelectOddReturn_moduleIdList}}):e._e()],1)]),t("div",{staticClass:"item"},[t("p",{class:e.formData.content?"active":""},[e._v("问题和建议")]),t("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.formData.content,expression:"formData.content",modifiers:{trim:!0}}],attrs:{rows:"10",type:"text",placeholder:"请输入问题和建议"},domProps:{value:e.formData.content},on:{input:function(t){t.target.composing||e.$set(e.formData,"content",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"item"},[t("p",{class:e.formData.files?"active":""},[e._v("图片")]),t("div",{staticClass:"img-box"},[e._l(e.formData.files,(function(a,l){return t("div",{key:l},[t("img",{attrs:{src:e.url_+"rbac/file/downloadRb/"+a.fileId+"?rbacToken="+e.rbacToken_}}),t("i",{staticClass:"iconfont icon-cha2",on:{click:function(t){return e.delFile(l)}}})])})),t("button",{directives:[{name:"show",rawName:"v-show",value:e.formData.files.length<5,expression:"formData.files.length < 5"}]},[e._v(" + "),t("input",{attrs:{type:"file",multiple:"",name:"",id:"",accept:"image/jpeg,image/png"},on:{change:e.fileChange}})])],2)]),t("div",{staticClass:"btn"},[t("span",{on:{click:e.handClick}},[e._v("上报")])])])])},i=[],o=(a("14d9"),a("6e53")),c=a("04b9"),s=a("c198"),n={components:{multiSelectOdd:c["a"],multiSelect:o["a"]},created(){this.url_=Object({NODE_ENV:"production",VUE_APP_ENV:"production",BASE_URL:""}).baseUrl,this.rbacToken_=this.$store.getters.rbacToken||localStorage.getItem("rbacToken")},data(){return{url_:"",rbacToken_:"",edit:!0,sourceList:[{name:"PC端",id:1},{name:"移动端",id:2},{name:"其他",id:3}],moduleIdList:[],multiSelectOddShow:!1,multiSelectOddShow_source:!1,multiSelectOddShow_module:!1,formData:{rbacToken:this.rbacToken_,sourceType:"",sourceName:"",moduleId:"",moduleName:"",selectTypeName:"",content:"",files:[]}}},methods:{selectSource(){const e=this;e.multiSelectOddShow_source=!0,e.selectTypeName="选择反馈类型"},selectModule(){const e=this;e.multiSelectOddShow_module=!0,e.selectTypeName="选择反馈模块"},multiSelectOddReturn_sourceList(e){let t=this;if(t.multiSelectOddShow_source=e.status,!e.id)return!1;t.formData.sourceType=e.id,t.formData.sourceName=e.name,this.getModuleData(e.id),t.formData.moduleId="",t.formData.moduleName=""},async getModuleData(e){this.sourceType;let t={type:17,parentId:e};const a=await Object(s["Fb"])(t);this.moduleIdList=a.data.map(e=>({id:e.id,name:e.name}))},multiSelectOddReturn_moduleIdList(e){let t=this;t.multiSelectOddShow_module=e.status,e.id&&(t.formData.moduleId=e.id,t.formData.moduleName=e.name)},async fileChange(e){let t=new FormData;const a=[...e.target.files];if("image/jpeg"==a[0].type||"image/png"==a[0].type){if(a&&a.length){if(a.length>5)return this.alert("最多上传5张图片"),!1;if(this.formData.files.length+a.length>5)return this.alert("最多上传5张图片"),!1;dd.device.notification.showPreloader({text:"文件上传中..",showIcon:!0,onSuccess(e){}}),a.forEach(e=>{t.append("file",e)}),t.append("rbacToken",localStorage.getItem("rbacToken"));const e=await Object(s["gc"])(t);dd.device.notification.hidePreloader({onSuccess:function(e){},onFail:function(e){}}),e.success&&e.data&&e.data.length&&e.data.forEach((e,t)=>{var l={};l.fileType=a[t].type,l.fileName=a[t].name,l.fileId=e,this.formData.files.push(l)})}}else this.alert("仅支持jpeg、png格式的图片")},delFile(e){this.formData.files.splice(e,1),this.files.splice(e,1)},alert(e){dd.device.notification.alert({message:e,title:"提示",buttonName:"确定"})},handClick(){if(!this.formData.sourceType)return void this.alert("请选择反馈类型");if(!this.formData.moduleId)return void this.alert("请选择请反馈模块");if(!this.formData.content)return void this.alert("请输入反馈内容");const e=this;e.formData.files=e.formData.files.map(e=>e.fileId),dd.device.notification.confirm({message:"确定反馈？",title:"提示",buttonLabels:["取消","确定"],async onSuccess(t){t.buttonIndex&&dd.device.notification.showPreloader({text:"提交中..",showIcon:!0,async onSuccess(t){const a=await Object(s["h"])(e.formData);dd.device.notification.hidePreloader({onSuccess:function(e){},onFail:function(e){}}),a.success&&dd.alert({message:a.message?a.message:"操作成功",title:"提示",button:"收到"}).then(t=>{e.$router.replace("/suggestion")}).catch(e=>{})},onFail:function(e){}})},onFail:function(e){}})}}},u=n,d=(a("5df0"),a("2877")),m=Object(d["a"])(u,l,i,!1,null,"6aaac5b8",null);t["default"]=m.exports},f9eb:function(e,t,a){}}]);