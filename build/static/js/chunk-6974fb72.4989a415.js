(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6974fb72"],{"15f8":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reported_warp"},[t("form",{staticClass:"search",attrs:{action:"."}},[t("input",{staticStyle:{display:"none"},attrs:{type:"text"}}),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.keyword,expression:"keyword",modifiers:{trim:!0}}],ref:"input",attrs:{type:"search",placeholder:"请输入搜索关键字，标题或内容"},domProps:{value:e.keyword},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},input:function(t){t.target.composing||(e.keyword=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),t("i",{staticClass:"iconfont icon-sousuo"})]),t("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},e._l(e.list,(function(n,i){return t("li",{key:i,on:{click:function(t){return e.toDetail(n)}}},[t("div",{staticClass:"title"},[t("h4",[e._v(e._s(n.title||"--"))])]),t("p",[e._v(e._s(n.incidentContent))]),t("div",[t("span",[e._v(e._s(n.road))]),t("i",[t("b",{staticClass:"iconfont icon-time"}),t("s",[e._v(e._s(n.incidentTime&&n.incidentTime.split(" ")[0]))])])])])})),0),t("div",{staticClass:"report",on:{click:e.eventType}},[t("i",{staticClass:"iconfont icon-daohanglan"}),t("p",[e._v("上报")])])])},s=[],a=(n("14d9"),n("9fdc")),o=n("c198"),r={name:"reported",components:{Nav:a["a"]},data(){return{keyword:"",loading:!1,noMore:!1,list:[],pageSize:0}},created(){const e=this;dd.enablePullToRefresh().then(t=>{e.pageSize=10,e.getData()}).catch(e=>{dd.stopPullDownRefresh()})},methods:{search(){this.getData(),this.$refs.input.blur()},async getData(){const e={keyword:this.keyword,pageNo:1,pageSize:this.pageSize,startPage:0,reportId:localStorage.getItem("userId")},t=await Object(o["Y"])(e);t.success&&(this.list=t.data.list,dd.stopPullDownRefresh())},changeIndex(e){this.tabIndex=e},checkSubTab(e){this.subTabIndex=e+1},loadMore(){this.pageSize+=10,this.getData()},toDetail(e){9==e.sourceType||118==e.sourceType||119==e.sourceType||120==e.sourceType||121==e.sourceType?this.$router.push(`reported/excessAdd?id=${e.id}&type=${e.sourceType}`):this.$router.push(`reported/add?id=${e.id}&type=${e.sourceType}`)},async eventType(){const e=this,t=await Object(o["qb"])(),n=t.data,i=n.map(e=>e.sourceName),s=n.map(e=>e.sourceType);dd.device.notification.actionSheet({title:"选择事件来源？",cancelButton:"取消",otherButtons:i,onSuccess:function(t){t.buttonIndex>=0&&(2==t.buttonIndex||3==t.buttonIndex||4==t.buttonIndex||5==t.buttonIndex||6==t.buttonIndex?e.$router.push("reported/excessAdd?type="+s[t.buttonIndex]):e.$router.push("reported/add?type="+s[t.buttonIndex]))},onFail:function(e){}})}}},c=r,d=(n("8a29"),n("2877")),u=Object(d["a"])(c,i,s,!1,null,"2af44963",null);t["default"]=u.exports},"8a29":function(e,t,n){"use strict";n("ac9b")},"9fdc":function(e,t,n){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab_warp"},e._l(e.tabs,(function(n,i){return t("span",{directives:[{name:"show",rawName:"v-show",value:!n.hide,expression:"!v.hide"}],key:i,class:e.index===i+1?"active":"",on:{click:function(t){return e.checkTab(i)}}},[e._v(e._s(n.name))])})),0)},s=[],a={props:["tabs","tabIndex"],data(){return{index:this.tabIndex}},mounted(){},methods:{checkTab(e){this.index!==e+1&&(this.index=e+1,this.$emit("changeIndex",this.index))}}},o=a,r=(n("e9e9"),n("2877")),c=Object(r["a"])(o,i,s,!1,null,"d765f7f0",null);t["a"]=c.exports},ac9b:function(e,t,n){},e4d4:function(e,t,n){},e9e9:function(e,t,n){"use strict";n("e4d4")}}]);