(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-beaad878"],{"82ba":function(t,e,a){},b7b6:function(t,e,a){"use strict";a("82ba")},d8bc:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[t.reportSuccess?t._e():e("div",{staticClass:"reportedAdd_warp"},[e("div",{staticClass:"form",class:t.edit?"":"unclick"},[e("div",{staticClass:"item"},[e("p",{staticClass:"active"},[t._v("上报人员")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.name,expression:"userInfo.name"}],attrs:{type:"text",readonly:"",placeholder:"在此输入上报人员"},domProps:{value:t.userInfo.name},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"name",e.target.value)}}})]),e("div",{staticClass:"item incidentContent"},[e("p",{class:t.formData.remark?"active":""},[t._v("描述")]),e("div",[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.remark,expression:"formData.remark",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"在此输入描述"},domProps:{value:t.formData.remark},on:{input:function(e){e.target.composing||t.$set(t.formData,"remark",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),e("div",{staticClass:"item"},[e("p",{class:t.formData.fileList.length>0?"active":""},[t._v("照片")]),e("div",{staticClass:"item_main"},[t._l(t.formData.fileList,(function(a,n){return e("span",{key:n,staticStyle:{position:"relative"}},[e("img",{attrs:{src:t.url_+"rbac/file/downloadRb/"+a.fileId+"?rbacToken="+t.rbacToken_}}),e("i",{staticClass:"iconfont icon-cha2",on:{click:function(e){return t.delFile(n)}}})])})),t.formData.fileList.length<5?e("span",[e("button",{staticStyle:{background:"#d7d7d7"}},[t._v(" 上传 "),e("input",{attrs:{multiple:"",type:"file",name:"",id:""},on:{change:t.fileChange}})])]):t._e()],2)])]),e("div",{staticClass:"btn"},[e("span",{on:{click:function(e){return t.handClick(1)}}},[t._v("保存")])])]),t.reportSuccess?e("div",{staticClass:"reportSuccess"},[e("h1",[t._v("上报成功")]),e("div",{staticClass:"btn"},[e("span",{on:{click:function(e){return t.goC(1)}}},[t._v("继续上报")]),e("span",{on:{click:function(e){return t.goC(2)}}},[t._v("返回处置事件")])])]):t._e()])},r=[],s=(a("14d9"),a("c198")),i={components:{},data(){return{reportSuccess:!1,url_:"",rbacToken_:"",userInfo:{},id:this.$route.query.id,index:[],edit:!0,formData:{operationType:"102",emergencyId:"",remark:"",fileList:[],runTeamId:"",runStationId:""}}},computed:{streetList(){return this.$store.state.common.streetList},streetOption(){return this.$store.state.common.streetList.map(t=>t.name)},actionList(){return this.$store.state.common.actionList},actionOption(){return this.$store.state.common.actionList.map(t=>t.name)},eventList(){return this.$store.state.common.eventList},eventOption(){return this.$store.state.common.eventList.map(t=>t.name)}},async created(){const t=this;dd.disablePullToRefresh().then(t=>{}).catch(t=>{}),t.url_=Object({NODE_ENV:"production",VUE_APP_ENV:"production",BASE_URL:""}).baseUrl,t.rbacToken_=t.$store.getters.rbacToken||localStorage.getItem("rbacToken");let e=t.$route.query;t.formData.emergencyId=e.emergencyId,t.formData.runTeamId=e.runTeamId,t.formData.runStationId=e.runStationId,localStorage.userInfo&&(t.userInfo=JSON.parse(localStorage.userInfo))},methods:{goC(t){const e=this;1==t?(e.formData.remark="",e.formData.fileList=[],e.reportSuccess=!1):e.$router.push({path:"/ARuiAn/LinkageDisposal/detail",query:{type:2,item:{}}})},incidentAddressFn(){const t=this;dd.locateOnMap({}).then(e=>{let a=e.province+e.city+e.adName+e.title;t.formData.incidentAddress=a,t.formData.x=e.longitude,t.formData.y=e.latitude}).catch(t=>{})},handClick(t){const e=this;dd.confirm({title:"温馨提示",message:"确定提交？",buttonLabels:["取消","确定"]}).then(async t=>{if(1==t.buttonIndex){const t=await Object(s["y"])(e.formData);t.success&&dd.toast({icon:"success",text:"操作成功"}).then(t=>{e.reportSuccess=!0}).catch(t=>{})}}).catch(t=>{})},async fileChange(t){const e=this;let a=new FormData,n=[...t.target.files];if(n&&n.length){n.forEach(t=>{a.append("file",t)}),a.append("rbacToken",localStorage.getItem("rbacToken"));const t=await Object(s["gc"])(a);t.success&&t.data&&t.data.length&&t.data.forEach((t,a)=>{var r={};r.fileType=n[a].type,r.fileName=n[a].name,r.fileId=t,e.formData.fileList.push(r)})}},delFile(t){this.formData.fileList.splice(t,1)},alert(t){dd.alert({message:t,title:"提示",button:"收到"}).then(t=>{}).catch(t=>{})}}},o=i,c=(a("b7b6"),a("2877")),l=Object(c["a"])(o,n,r,!1,null,"02e7c5a4",null);e["default"]=l.exports}}]);