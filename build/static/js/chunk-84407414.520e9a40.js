(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84407414"],{8526:function(t,e,a){"use strict";a("d66a")},"9fdc":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tab_warp"},t._l(t.tabs,(function(a,s){return e("span",{directives:[{name:"show",rawName:"v-show",value:!a.hide,expression:"!v.hide"}],key:s,class:t.index===s+1?"active":"",on:{click:function(e){return t.checkTab(s)}}},[t._v(t._s(a.name))])})),0)},n=[],i={props:["tabs","tabIndex"],data(){return{index:this.tabIndex}},mounted(){},methods:{checkTab(t){this.index!==t+1&&(this.index=t+1,this.$emit("changeIndex",this.index))}}},r=i,o=(a("e9e9"),a("2877")),d=Object(o["a"])(r,s,n,!1,null,"d765f7f0",null);e["a"]=d.exports},d66a:function(t,e,a){},e4d4:function(t,e,a){},e9e9:function(t,e,a){"use strict";a("e4d4")},f50c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"emergency_warp"},[e("form",{staticClass:"search",attrs:{action:"."}},[e("input",{staticStyle:{display:"none"},attrs:{type:"text"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],ref:"input",attrs:{type:"search",placeholder:"请输入搜索关键字，标题或内容"},domProps:{value:t.keyword},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),e("i",{staticClass:"iconfont icon-sousuo"})]),e("div",{staticClass:"tab"},[e("Nav",{attrs:{tabs:t.tabs,tabIndex:t.tabIndex},on:{changeIndex:t.changeIndex}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tabIndex,expression:"tabIndex === 1"}],staticClass:"subTab"},t._l(t.subTabs,(function(a,s){return e("span",{key:s,class:t.subTabIndex===s+1?"active":"",on:{click:function(e){return t.checkSubTab(s)}}},[t._v(t._s(a))])})),0),e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},t._l(t.list,(function(a,s){return e("li",{key:s,on:{click:function(e){return t.toDetail(a.id)}}},[e("h4",[t._v(t._s(a.title))]),e("p",[t._v(t._s(a.incidentContent))]),e("div",[e("span",[t._v(t._s(a.roadName))]),e("i",[e("b",{staticClass:"iconfont icon-time"}),e("s",[t._v(t._s(a.teamWorkTime))])])])])})),0)])},n=[],i=(a("14d9"),a("9fdc")),r=a("c198"),o={name:"emergency",components:{Nav:i["a"]},data(){return{keyword:"",loading:!1,noMore:!1,tabs:[{name:"待办事件"},{name:"已办事件"},{name:"草稿箱"}],subTabs:["主办","协办","已发","已回复"],tabIndex:localStorage.getItem("emergencyTabIndex")/1||1,subTabIndex:localStorage.getItem("emergencySubIndex")/1||1,list:[],total:0,params:{pageNo:1,teamworkType:2,eventHandleType:1}}},computed:{streetList(){return this.$store.state.common.streetList}},created(){const t=this;dd.enablePullToRefresh().then(e=>{t.getData()}).catch(t=>{dd.stopPullDownRefresh()}),this.getData()},methods:{async getData(){this.params.keyword=this.keyword,1===this.tabIndex&&1===this.subTabIndex?(this.params.dataType=1,this.params.type=1):1===this.tabIndex&&2===this.subTabIndex?(this.params.dataType=2,this.params.type=2):1===this.tabIndex&&3===this.subTabIndex?(this.params.dataType=3,this.params.type=3):1===this.tabIndex&&4===this.subTabIndex?(this.params.dataType=5,this.params.type=4):2===this.tabIndex?(this.params.dataType=4,this.params.type=5):3===this.tabIndex&&(this.params.dataType=0,this.params.type=6);const t=await Object(r["Z"])(this.params);t.success&&(this.list=t.data.list,this.total=t.data.total,dd.stopPullDownRefresh())},search(){this.getData(),this.$refs.input.blur()},changeIndex(t){this.tabIndex=t,localStorage.setItem("emergencyTabIndex",t),this.pageSize=10,this.keyword="",this.getData()},checkSubTab(t){this.subTabIndex!==t+1&&(this.subTabIndex=t+1,localStorage.setItem("emergencySubIndex",t+1),this.pageSize=10,this.keyword="",this.getData())},loadMore(){this.list.length!==this.total&&(this.pageSize+=10,this.getData())},toDetail(t){this.$router.push(`emergency/detail?id=${t}&type=${this.params.type}`)},add(){this.$router.push("emergency/add")}}},d=o,c=(a("8526"),a("2877")),l=Object(c["a"])(d,s,n,!1,null,"765821fa",null);e["default"]=l.exports}}]);