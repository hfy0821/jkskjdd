(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34b6f381"],{"0fb2":function(t,e,a){},4094:function(t,e,a){"use strict";a("0fb2")},"6b7b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("van-overlay",{attrs:{show:t.show}},[e("div",{staticClass:"wrapper"},[e("div",{staticClass:"block",style:{height:1!=t.type?"45%":"70%"}},[e("div",{staticClass:"header"},[e("span",[t._v(t._s(t.title||"标题"))]),e("span",{on:{click:function(e){return t.onClick(1)}}},[t._v("x")])]),e("div",{staticClass:"main"},[e("div",{staticClass:"content"},[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.dealContent,expression:"dealContent",modifiers:{trim:!0}}],staticStyle:{width:"100%",background:"#fafafa"},attrs:{type:"text",placeholder:"在此输入内容",rows:"5"},domProps:{value:t.dealContent},on:{input:function(e){e.target.composing||(t.dealContent=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),1==t.type?e("div",{staticClass:"VPM_upload"},[e("div",{on:{click:function(e){return t.uploadFn()}}},[e("span",[t._v("+")])]),e("input",{staticStyle:{display:"none"},attrs:{multiple:"",type:"file",name:"",id:"aa"},on:{change:t.fileChange}}),t._l(t.fileIdList,(function(a,n){return e("img",{key:n,attrs:{src:t.baseUrl+"rbac/file/downloadRb/"+a.fileId+"?rbacToken="+t.rbacToken,alt:""}})}))],2):t._e()]),e("div",{staticClass:"footer"},[e("span",{on:{click:function(e){return t.onClick(1)}}},[t._v("取消")]),e("span",{on:{click:function(e){return t.onClick(2)}}},[t._v("确认")])])])])])],1)},i=[],o=(a("14d9"),a("c198")),s={props:["show","title","type"],data(){return{dealContent:"",baseUrl:Object({NODE_ENV:"production",VUE_APP_ENV:"production",BASE_URL:""}).baseUrl,rbacToken:localStorage.getItem("rbacToken")||"",fileIdList:[]}},mounted(){},created(){},methods:{uploadFn(){document.getElementById("aa").click()},async fileChange(t){let e=new FormData;const a=[...t.target.files];if(this.fileIdList.length+a.length>5)return dd.alert({message:"最多只能上传9张",title:"提示",button:"收到"}),!1;if(a&&a.length){dd.showLoading({text:"文件上传中.."}),a.forEach(t=>{e.append("file",t)}),e.append("rbacToken",localStorage.getItem("rbacToken"));const t=await Object(o["gc"])(e);dd.hideLoading({}),t.success&&t.data&&t.data.length&&t.data.forEach((t,e)=>{var n={};n.fileType=a[e].type,n.fileName=a[e].name,n.fileId=t,this.fileIdList.push(n)})}},previewFn(t,e,a){let n=this.baseUrl+"rbac/file/downloadRb/"+t+"?rbacToken="+this.rbacToken,i=[];2==a?e.map((t,e)=>{i.push(this.baseUrl+"rbac/file/downloadRb/"+t+"?rbacToken="+this.rbacToken)}):e.map((t,e)=>{i.push(this.baseUrl+"rbac/file/downloadRb/"+t.fileId+"?rbacToken="+this.rbacToken)}),this.previewImageFn(n,i)},onClick(t){this.$emit("onDialog",{show:t,data:{dealContent:this.dealContent,fileIdList:this.fileIdList}})}},watch:{show(t,e){this.dealContent="",this.fileIdList=[]}}},l=s,r=(a("4094"),a("2877")),c=Object(r["a"])(l,n,i,!1,null,"7a7593cf",null);e["default"]=c.exports}}]);