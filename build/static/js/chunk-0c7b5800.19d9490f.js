(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c7b5800"],{"7c00":function(t,e,a){},a04ba:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reportedAdd_warp"},[e("div",{staticClass:"form",class:t.edit?"":"unclick"},[t.formData.timeStatus&&t.edit?e("p",{staticClass:"done"},[t._v(" 您所在部门今日已上报 ")]):t._e(),e("div",{staticClass:"item"},[e("p",{class:t.formData.departmentName?"active":""},[t._v("报告单位")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.departmentName,expression:"formData.departmentName",modifiers:{trim:!0}}],attrs:{type:"text",readonly:"",placeholder:"--"},domProps:{value:t.formData.departmentName},on:{click:t.selectDepart,input:function(e){e.target.composing||t.$set(t.formData,"departmentName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"item"},[e("p",{class:"active"},[t._v("有无异常")]),e("div",[e("input",{attrs:{readonly:"",type:"text",placeholder:"点击选择有无异常"},domProps:{value:t.formData.isAbnormal?"有":"无"},on:{click:t.unusual}})])]),e("div",{staticClass:"item"},[e("p",{class:t.formData.userName?"active":""},[t._v("报告人")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.userName,expression:"formData.userName"}],attrs:{readonly:"",type:"text",placeholder:"--"},domProps:{value:t.formData.userName},on:{input:function(e){e.target.composing||t.$set(t.formData,"userName",e.target.value)}}})])]),e("div",{staticClass:"item"},[e("p",{class:t.formData.telephone?"active":""},[t._v("联系电话")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.telephone,expression:"formData.telephone"}],attrs:{type:"text",readonly:"",placeholder:"--"},domProps:{value:t.formData.telephone},on:{input:function(e){e.target.composing||t.$set(t.formData,"telephone",e.target.value)}}})])]),e("div",{staticClass:"item reportContent"},[e("p",{class:t.formData.reportContent?"active":""},[t._v("报告内容")]),e("div",[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.reportContent,expression:"formData.reportContent",modifiers:{trim:!0}}],attrs:{readonly:0===t.formData.isAbnormal,placeholder:"在此输入报告内容"},domProps:{value:t.formData.reportContent},on:{input:function(e){e.target.composing||t.$set(t.formData,"reportContent",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])]),t.id?t._e():e("div",{staticClass:"tip"},[e("i",[t._v("注：")]),e("span",[t._v(" 严格执行涉稳信息“零报告”制度，"+t._s(t.startDate||"--")+"至"+t._s(t.endDate||"--")+"的每日"+t._s(t.alertTime||"--")+"前向区委政法委值班室书面报送本 辖区、本系统当日涉稳信息“零报告”单，没有情况的也要书面“零报告” （值班电 话：86650962，传真号码：88511986）。 遇重要、敏感信息要第一时间上报，在“零报告”规定时间之后，新发生或出现新情 况的也要及时跟进上报。此外，对于一些仍在处理中的不稳定问题，后续化解稳控 情况也要持续纳入每日“零报告”内容。 ")])]),e("div",{staticClass:"endHolder"}),e("div",{staticClass:"btn"},[e("span",{on:{click:function(e){return t.handClick(1)}}},[t._v("上报")])])])},n=[],r=(a("14d9"),a("c198")),i={name:"zeroAdd",data(){return{id:this.$route.query.id,edit:!0,formData:{departmentName:"",isAbnormal:0,userName:"",telephone:"",reportContent:""},alertTime:"",startDate:"",endDate:"",depart:[],reportedForUser:[]}},async created(){let t=this;if(dd.disablePullToRefresh().then(t=>{}).catch(t=>{}),t.id)document.title="零报详情",t.edit=!1,t.formData=JSON.parse(localStorage.getItem("zeroDetail")),t.$forceUpdate();else{const[e,a]=await Promise.all([Object(r["C"])(),Object(r["rb"])()]);e.success&&(t.alertTime=e.data.alertTime&&e.data.alertTime.substr(11,5),t.startDate=e.data.beginSendDate&&e.data.beginSendDate.substr(0,10),t.endDate=e.data.lastSendDate&&e.data.lastSendDate.substr(0,10)),a.success&&(t.reportedForUser=a.data,t.formData=a.data&&a.data[0],0===t.formData.isAbnormal&&(t.formData.reportContent="平稳"),t.formData&&0===t.formData.timeStatus||(t.edit=!1,t.formData={}),a.data.length>1&&(t.depart=a.data.map(t=>t.departmentName)))}},methods:{selectDepart(){const t=this;t.reportedForUser.length<=1||dd.device.notification.actionSheet({title:"选择报告单位？",cancelButton:"取消",otherButtons:t.depart,onSuccess:function(e){-1!==e.buttonIndex&&(t.formData=t.reportedForUser[e.buttonIndex],0===t.formData.isAbnormal&&(t.formData.reportContent="平稳"),0!==t.formData.timeStatus&&(t.edit=!1))},onFail:function(t){}})},unusual(){const t=this;dd.device.notification.actionSheet({title:"选择有无异常？",cancelButton:"取消",otherButtons:["无","有"],onSuccess:function(e){-1!==e.buttonIndex&&(t.formData.isAbnormal=e.buttonIndex,e.buttonIndex?t.formData.reportContent="":t.formData.reportContent="平稳")},onFail:function(t){}})},del(){},cancel(){this.$router.go(-1)},save(){},handClick(t){if(!this.formData.reportContent)return void this.alert("请输入报告内容");this.formData.handleFilesListStr=JSON.stringify(this.files);const e=this;dd.device.notification.confirm({message:e.id?"确定修改？":"确定上报？",title:"提示",buttonLabels:["取消","确定"],async onSuccess(t){t.buttonIndex&&dd.device.notification.showPreloader({text:"提交中..",showIcon:!0,async onSuccess(t){const a=await Object(r["e"])(e.formData);dd.device.notification.hidePreloader({onSuccess:function(t){},onFail:function(t){}}),a.success&&dd.alert({message:a.message?a.message:"操作成功",title:"提示",button:"收到"}).then(t=>{e.$router.go(-1)}).catch(t=>{})},onFail:function(t){}})},onFail:function(t){}})},async fileChange(t){let e=new FormData;const a=[...t.target.files];if(a&&a.length){dd.device.notification.showPreloader({text:"文件上传中..",showIcon:!0,onSuccess(t){}}),a.forEach(t=>{e.append("file",t)}),e.append("rbacToken",localStorage.getItem("rbacToken"));const t=await upload(e);dd.device.notification.hidePreloader({onSuccess:function(t){},onFail:function(t){}}),t.success&&t.data&&t.data.length&&t.data.forEach((t,e)=>{var o={};o.fileType=a[e].type,o.fileName=a[e].name,o.fileId=t,this.files.push(o)})}},delFile(t){this.files.splice(t,1)},alert(t){dd.device.notification.alert({message:t,title:"提示",buttonName:"确定"})}}},s=i,d=(a("fcdd"),a("2877")),c=Object(d["a"])(s,o,n,!1,null,"3dfa09ac",null);e["default"]=c.exports},fcdd:function(t,e,a){"use strict";a("7c00")}}]);