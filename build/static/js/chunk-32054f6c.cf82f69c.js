(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32054f6c"],{"0607":function(t,e,a){"use strict";a("24d9")},"0674":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"clues_warp"},[e("span",{staticClass:"clues_title"},[t._v("现在开始上报新的线索")]),e("div",{staticClass:"cluesMsg"},[t._m(0),e("div",{staticClass:"form",class:t.edit?"":"unclick"},[e("div",{staticClass:"item"},[e("p",{class:t.formData.address?"active":""},[t._v("发生地址")]),e("div",{staticClass:"relativeC"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.address,expression:"formData.address",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"点击输入地址，也可地图进行定位",readonly:t.disabled},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),e("i",{staticClass:"iconfont icon-location",on:{click:function(e){return t.addressFn()}}})])]),e("div",{staticClass:"item"},[e("p",{class:t.formData.description?"active":""},[t._v("线索描述")]),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.description,expression:"formData.description",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"在此输入线索描述",readonly:t.disabled,rows:"4"},domProps:{value:t.formData.description},on:{input:function(e){e.target.composing||t.$set(t.formData,"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"item"},[e("p",{class:t.formData.clueType?"active":""},[t._v("线索类型")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.clueTypeName,expression:"formData.clueTypeName",modifiers:{trim:!0}}],attrs:{type:"text",readonly:"",placeholder:"在此输入线索类型"},domProps:{value:t.formData.clueTypeName},on:{click:function(e){!t.disabled&&t.cluesTypeFn()},input:function(e){e.target.composing||t.$set(t.formData,"clueTypeName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"item"},[e("p",{class:t.formData.happenDate?"active":""},[t._v("线索时间")]),e("input",{attrs:{type:"text",placeholder:"在此输入时间",readonly:""},domProps:{value:t.formData.happenDate},on:{click:function(e){!t.disabled&&t.timeFn()}}})])])]),e("div",{staticClass:"analyseClass"},[t._m(1),0!=t.clueEventPeopleList.length?e("div",t._l(t.clueEventPeopleList,(function(i,s){return e("div",{key:s,staticClass:"form"},[e("div",{staticClass:"form_people"},[t._v(" 人员"+t._s(s+1)+" "),e("div",{staticClass:"add_btn",on:{click:function(e){return t.personRetrieve(s)}}},[e("img",{attrs:{src:a("f628"),alt:""}})])]),e("div",{staticClass:"item"},[e("p",{class:i.name?"active":""},[t._v("人物姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:i.name,expression:"item.name"}],attrs:{type:"text",placeholder:"输入人物姓名"},domProps:{value:i.name},on:{input:function(e){e.target.composing||t.$set(i,"name",e.target.value)}}})]),e("div",{staticClass:"item"},[e("p",{class:i.cardid?"active":""},[t._v("身份证号")]),e("input",{directives:[{name:"model",rawName:"v-model",value:i.cardid,expression:"item.cardid"}],attrs:{type:"text",placeholder:"输入身份证号"},domProps:{value:i.cardid},on:{input:function(e){e.target.composing||t.$set(i,"cardid",e.target.value)}}})]),e("div",{staticClass:"item"},[e("p",{class:i.districtsId?"active":""},[t._v("所属街道")]),e("input",{directives:[{name:"model",rawName:"v-model",value:i.districtsName,expression:"item.districtsName"}],attrs:{type:"text",placeholder:"输入所属街道",readonly:""},domProps:{value:i.districtsName},on:{click:function(e){!t.disabled&&t.roadFn(i)},input:function(e){e.target.composing||t.$set(i,"districtsName",e.target.value)}}})]),e("div",{staticClass:"item"},[e("p",{class:i.communityId?"active":""},[t._v("所属社区")]),e("input",{directives:[{name:"model",rawName:"v-model",value:i.communityName,expression:"item.communityName"}],attrs:{type:"text",placeholder:"输入所属社区",readonly:""},domProps:{value:i.communityName},on:{click:function(e){!t.disabled&&t.communityFn(i)},input:function(e){e.target.composing||t.$set(i,"communityName",e.target.value)}}})]),t.clueEventPeopleList.length>=2?e("div",{staticClass:"del_btn",on:{click:function(e){return t.delPeople(s)}}},[e("img",{attrs:{src:a("d5b6"),alt:""}})]):t._e()])})),0):t._e()]),e("div",{staticClass:"btn"},[e("span",{on:{click:function(e){return t.report()}}},[t._v("上报")])])])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header_icon"},[e("span",[t._v("线索信息")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"header_icon"},[e("span",[t._v("人员信息")])])}],c=(a("14d9"),a("c198")),n=a("9fdc"),r={components:{Nav:n["a"]},data(){return{disabled:!1,edit:!0,tabs:[],tabIndex:localStorage.getItem("cluesAddTabIndex")/1||1,formData:{address:"",districtsId:"",roadName:"",description:"",clueType:"",clueTypeName:"",happenDate:"",longitude:"",latitude:""},clueEventPeopleList:[{name:"",cardid:"",districtsId:"",districtsName:"",communityId:"",communityName:""}],cluesTypeData:[],characterLabelsData:[],roadData1:[]}},async created(){const t=this;let e=this.$store.state;t.cluesTypeData=e.cluesTypeData,t.roadData1=e.roadData1,t.characterLabelsData=e.characterLabelsData,t.getData()},computed:{},methods:{getData(){const t=this;let e=t.$route.query;if(e&&e.listData){let a=[];t.associateStatus=e.associateStatus,t.formData=e.formData,t.peoples=e.peoples,a.push(e.listData),null==t.peoples?t.peoples=a:null!=t.peoples&&(t.peoples=t.peoples.concat(a));let i=[];t.peoples.map((t,e)=>{e+=1,i.push({name:"人员"+e})}),t.tabs=i}},cluesTypeFn(){const t=this;dd.showSelect({source:t.cluesTypeData}).then(e=>{t.formData.clueType=e.value,t.formData.clueTypeName=e.key}).catch(t=>{})},timeFn(){const t=this;dd.showDateTimePicker({format:"yyyy-MM-dd HH:mm:ss",value:t.formData.happenDate}).then(e=>{t.formData.happenDate=e.value})},addressFn(){const t=this;dd.locateOnMap({longitude:t.formData.longitude?t.formData.longitude:"",latitude:t.formData.latitude?t.formData.latitude:""}).then(e=>{let a=e.province+e.city+e.adName+e.title;t.formData.address=a,t.formData.longitude=e.longitude,t.formData.latitude=e.latitude}).catch(t=>{})},roadFn(t){const e=this;dd.showSelect({source:e.roadData1}).then(a=>{t.districtsId=a.value,t.districtsName=a.key,e.$forceUpdate()}).catch(t=>{})},async communityFn(t){const e=this,a=await Object(c["J"])({roadId:t.districtsId});let i=a.data.map((t,e)=>({key:t.name,value:t.id}));dd.showSelect({source:i}).then(a=>{t.communityId=a.value,t.communityName=a.key,e.$forceUpdate()}).catch(t=>{})},selectLabel(t){const e=this;let a=e.characterLabelsData.map((t,e)=>t.name);dd.showMultiSelect({options:a,selectOption:e.peoples[t].characterLabelNameList}).then(a=>{let i=[],s=[];a.map((t,a)=>{i.push(e.characterLabelsData[t].name),s.push(e.characterLabelsData[t].id)}),e.peoples[t].characterLabelNameList=i,e.peoples[t].characterLabel=s.join(",")})},personRetrieve(){let t=this,e={name:"",cardid:"",districtsId:""};t.clueEventPeopleList.push(e)},changeIndex(t){const e=this;e.tabIndex=t,localStorage.setItem("cluesAddTabIndex",t),this.$forceUpdate()},remove(t){const e=this;dd.confirm({title:"温馨提示",message:"是否移除关联?",buttonLabels:["取消","确定"]}).then(async a=>{1==a.buttonIndex&&(e.peoples.splice(t,1),e.tabs.splice(t,1),this.$forceUpdate())}).catch(t=>{})},validateFn(){const t=this;if(!t.formData.address)return t.alert("请输入地址"),!1;if(!t.formData.description)return t.alert("请输入事件描述"),!1;if(!t.formData.clueType)return t.alert("请输入线索类型"),!1;if(!t.formData.happenDate)return t.alert("请输入时间"),!1;for(var e=0;e<t.clueEventPeopleList.length;e++){if(!t.clueEventPeopleList[e].name)return t.alert("请输入姓名"),!1;if(!t.clueEventPeopleList[e].cardid)return t.alert("请输入身份证号"),!1;if(!t.clueEventPeopleList[e].districtsId)return t.alert("请输入所属街道"),!1;if(!t.clueEventPeopleList[e].communityId)return t.alert("请输入所属村社"),!1}return!0},alert(t){dd.alert({message:t,title:"提示",button:"收到"}).then(t=>{}).catch(t=>{})},report(){const t=this,e=t.validateFn();e&&dd.confirm({title:"温馨提示",message:"确定提交？",buttonLabels:["取消","确定"]}).then(async e=>{if(1==e.buttonIndex){let e=[];t.clueEventPeopleList.map((t,a)=>{e.push({name:t.name,cardid:t.cardid,districtsId:t.districtsId,communityId:t.communityId})});const a=await Object(c["d"])({description:t.formData.description,address:t.formData.address,districtsId:t.formData.districtsId,clueType:t.formData.clueType,longitude:t.formData.longitude,latitude:t.formData.latitude,commitType:1,happenDate:t.formData.happenDate,clueEventPeopleList:e});a.success&&(dd.toast({icon:"success",text:"操作成功"}).then(t=>{}).catch(t=>{}),t.$router.push("/zhezheng/cluesReport/cluesList"))}}).catch(t=>{})},delPeople(t){this.clueEventPeopleList.splice(t,1)}}},o=r,l=(a("0607"),a("2877")),d=Object(l["a"])(o,i,s,!1,null,"3fdc4fe9",null);e["default"]=d.exports},"24d9":function(t,e,a){},"9fdc":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tab_warp"},t._l(t.tabs,(function(a,i){return e("span",{directives:[{name:"show",rawName:"v-show",value:!a.hide,expression:"!v.hide"}],key:i,class:t.index===i+1?"active":"",on:{click:function(e){return t.checkTab(i)}}},[t._v(t._s(a.name))])})),0)},s=[],c={props:["tabs","tabIndex"],data(){return{index:this.tabIndex}},mounted(){},methods:{checkTab(t){this.index!==t+1&&(this.index=t+1,this.$emit("changeIndex",this.index))}}},n=c,r=(a("e9e9"),a("2877")),o=Object(r["a"])(n,i,s,!1,null,"d765f7f0",null);e["a"]=o.exports},d5b6:function(t,e,a){t.exports=a.p+"static/img/iconDel.2817f271.png"},e4d4:function(t,e,a){},e9e9:function(t,e,a){"use strict";a("e4d4")},f628:function(t,e){t.exports="data:image/svg+xml;base64,aW1wb3J0IFNwcml0ZVN5bWJvbCBmcm9tICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3ZnLWJha2VyLXJ1bnRpbWUvYnJvd3Nlci1zeW1ib2wuanMiOwppbXBvcnQgc3ByaXRlIGZyb20gIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdmctc3ByaXRlLWxvYWRlci9ydW50aW1lL2Jyb3dzZXItc3ByaXRlLmJ1aWxkLmpzIjsKdmFyIHN5bWJvbCA9IG5ldyBTcHJpdGVTeW1ib2woewogICJpZCI6ICJpY29uLWljb25BZGQiLAogICJ1c2UiOiAiaWNvbi1pY29uQWRkLXVzYWdlIiwKICAidmlld0JveCI6ICIwIDAgMTAyNCAxMDI0IiwKICAiY29udGVudCI6ICI8c3ltYm9sIGNsYXNzPVwiaWNvblwiIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIGlkPVwiaWNvbi1pY29uQWRkXCI+PGRlZnM+PHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPjwvc3R5bGU+PC9kZWZzPjxwYXRoIGQ9XCJNNTEyIDkwOS4wNjEyMjRjLTIxOC45MDYxMjIgMC0zOTcuMDYxMjI0LTE3OC4xNTUxMDItMzk3LjA2MTIyNC0zOTcuMDYxMjI0czE3OC4xNTUxMDItMzk3LjA2MTIyNCAzOTcuMDYxMjI0LTM5Ny4wNjEyMjQgMzk3LjA2MTIyNCAxNzguMTU1MTAyIDM5Ny4wNjEyMjQgMzk3LjA2MTIyNC0xNzguMTU1MTAyIDM5Ny4wNjEyMjQtMzk3LjA2MTIyNCAzOTcuMDYxMjI0elwiIGZpbGw9XCIjMTZDNEFGXCIgcC1pZD1cIjI4MjNcIiAvPjxwYXRoIGQ9XCJNNjYwLjg5Nzk1OSA1MzEuODUzMDYxaC0yOTcuNzk1OTE4Yy0xMC45NzE0MjkgMC0xOS44NTMwNjEtOC44ODE2MzMtMTkuODUzMDYxLTE5Ljg1MzA2MXM4Ljg4MTYzMy0xOS44NTMwNjEgMTkuODUzMDYxLTE5Ljg1MzA2MWgyOTcuNzk1OTE4YzEwLjk3MTQyOSAwIDE5Ljg1MzA2MSA4Ljg4MTYzMyAxOS44NTMwNjEgMTkuODUzMDYxcy04Ljg4MTYzMyAxOS44NTMwNjEtMTkuODUzMDYxIDE5Ljg1MzA2MXpcIiBmaWxsPVwiI0RDRkZGQVwiIHAtaWQ9XCIyODI0XCIgLz48cGF0aCBkPVwiTTUxMiA2ODAuNzUxMDJjLTEwLjk3MTQyOSAwLTE5Ljg1MzA2MS04Ljg4MTYzMy0xOS44NTMwNjEtMTkuODUzMDYxdi0yOTcuNzk1OTE4YzAtMTAuOTcxNDI5IDguODgxNjMzLTE5Ljg1MzA2MSAxOS44NTMwNjEtMTkuODUzMDYxczE5Ljg1MzA2MSA4Ljg4MTYzMyAxOS44NTMwNjEgMTkuODUzMDYxdjI5Ny43OTU5MThjMCAxMC45NzE0MjktOC44ODE2MzMgMTkuODUzMDYxLTE5Ljg1MzA2MSAxOS44NTMwNjF6XCIgZmlsbD1cIiNEQ0ZGRkFcIiBwLWlkPVwiMjgyNVwiIC8+PC9zeW1ib2w+Igp9KTsKdmFyIHJlc3VsdCA9IHNwcml0ZS5hZGQoc3ltYm9sKTsKZXhwb3J0IGRlZmF1bHQgc3ltYm9s"}}]);