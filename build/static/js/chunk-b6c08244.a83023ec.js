(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6c08244"],{"42c8":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hiddenDetailMaxbox"},[t("div",{staticClass:"posabs",staticStyle:{width:"35vw"}},[1==e.pageType&&-1!=e.infoid?t("div",{staticClass:"butStyle_color-red",staticStyle:{"line-height":"30px","border-radius":"20vw"},on:{click:function(t){-1!=e.infoid&&e.removeHidden()}}},[e._v("移除隐患")]):e._e()]),1==e.pageType||2==e.pageType?t("div",{staticClass:"Item_content_Box"},[t("div",{staticClass:"Item_title"},[t("div",[t("span",[e._v("*")]),e._v(e._s(1==e.pageType?"隐患照片":"整改照片")+" ")])]),t("div",[t("imgUpload",{ref:"imgDom",attrs:{filelist:e.imginfo["url"],fileIdlist:e.imginfo["id"]},on:{getimgUrl:function(t){return e.getimginfo(t,1)},getimgfile:function(t){return e.getimginfo(t,2)},getimgId:function(t){return e.getimginfo(t,3)}}})],1)]):e._e(),1==e.pageType||2==e.pageType?t("div",{staticClass:"Item_content_Box",staticStyle:{margin:"15px 0px"}},[t("div",{staticClass:"Item_title"},[t("span",[e._v("*")]),e._v(e._s(1==e.pageType?"隐患描述":"整改描述")+" ")]),t("div",{staticClass:"textBox"},[t("van-field",{staticStyle:{"line-height":"20px"},attrs:{type:"textarea",autosize:{maxHeight:180,minHeight:50},placeholder:"请输入描述"},model:{value:e.hidedangerVal,callback:function(t){e.hidedangerVal=t},expression:"hidedangerVal"}})],1)]):e._e(),4==e.pageType?t("div",{staticClass:"Item_content_Box"},[e._m(0),t("div",[t("van-field",{staticClass:"shellBox",attrs:{type:"digit",placeholder:"请输入延期天数(单位：天)"},model:{value:e.deferralDays,callback:function(t){e.deferralDays=t},expression:"deferralDays"}})],1)]):e._e(),3==e.pageType||4==e.pageType?t("div",{staticClass:"Item_content_Box"},[t("div",{staticClass:"Item_title"},[t("span",[e._v("*")]),e._v(e._s(3==e.pageType?"申诉原因":"延期原因")+" ")]),t("div",{staticClass:"textBox"},[t("van-field",{staticStyle:{"line-height":"20px"},attrs:{type:"textarea",autosize:{maxHeight:180,minHeight:50},placeholder:"请输入"+(3==e.pageType?"申诉原因":"延期原因")},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1)]):e._e(),5==e.pageType||6==e.pageType?t("div",{staticClass:"Item_content_Box"},[e._m(1),t("div",{staticClass:"textBox"},[t("van-field",{staticStyle:{"line-height":"20px"},attrs:{type:"textarea",autosize:{maxHeight:180,minHeight:50},placeholder:5==e.pageType||6==e.pageType?"请输入理由":"请输入隐患的描述"},model:{value:e.RetuenVal,callback:function(t){e.RetuenVal=t},expression:"RetuenVal"}})],1)]):e._e(),t("div",{staticStyle:{"padding-bottom":"15vh"}}),t("div",{staticClass:"butBox"},[t("van-button",{staticClass:"butStyle",attrs:{type:"default"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),1==e.pageType?t("van-button",{staticClass:"butStyle colorwhite",attrs:{type:"primary"},on:{click:function(t){return e.saveHiddenDangerInfo()}}},[e._v("保存")]):t("van-button",{staticClass:"butStyle colorwhite",attrs:{type:"primary"},on:{click:function(t){return e.uploadOtherResult()}}},[e._v("提交")])],1)])},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"Item_title"},[t("span",[e._v("*")]),e._v("延期天数 ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"Item_title"},[t("span",[e._v("*")]),e._v("退回理由简述 ")])}],n=i("60b2"),r=i("f564"),o=i("2241"),d={components:{imgUpload:n["a"]},data(){return{upInfo:{},hidedangerVal:"",reason:"",RetuenVal:"",deferralDays:1,HiddenDangerId:"",reviewDetailid:"",imginfo:[],infoid:-1,pageType:1,reupload:0}},mounted(){if(this.$route.query.type&&(this.pageType=this.$route.query.type),this.$route.query.reupload&&(this.reupload=this.$route.query.reupload),this.$route.query.reviewDetailid&&(this.reviewDetailid=this.$route.query.reviewDetailid),this.$route.query.HiddenDangerId&&(this.HiddenDangerId=this.$route.query.HiddenDangerId),this.$route.query.infoId){this.infoid=this.$route.query.infoId-1;const{imginfo:e,description:t}=this.$store.state.HiddenDangerInfo[this.infoid];this.hidedangerVal=t,this.imginfo=e}},methods:{saveHiddenDangerInfo(e){if(this.$refs.imgDom.sendInfo(),this.$refs.imgDom.sendInfo3(),0!=this.imginfo.id.length)if(""!=this.hidedangerVal){if(-1!=this.infoid){const e=this.infoid;let t=this.$store.state.HiddenDangerInfo;return t[e]={imginfo:this.imginfo,description:this.hidedangerVal},this.$store.commit("StoreData",{key:"HiddenDangerInfo",value:[...t]}),void this.$router.go(-1)}this.$store.commit("StoreData",{key:"HiddenDangerInfo",value:[...this.$store.state.HiddenDangerInfo,{imginfo:this.imginfo,description:this.hidedangerVal}]}),this.$router.go(-1)}else Object(r["a"])({type:"danger",message:"隐患描述未填写"});else Object(r["a"])({type:"danger",message:"隐患照片未上传"})},getimginfo(e,t){1==t?this.imginfo["url"]=e:2==t?this.imginfo["file"]=e:this.imginfo["id"]=e},removeHidden(){const e=this;o["a"].confirm({title:"确认删除",width:"250px"}).then(t=>{if(-1!=e.infoid){let t=this.$store.state.HiddenDangerInfo;t.splice(e.infoid,1),this.$store.commit("StoreData",{key:"HiddenDangerInfo",value:[...t]})}window.history.go(-1)})},async uploadOtherResult(e){switch(this.pageType){case 2:this.$refs.imgDom.sendInfo3();let e=this.$utils.getString(this.imginfo["id"],",");if(""==e)return void Object(r["a"])({type:"danger",message:"未上传整改图片"});if(""==this.hidedangerVal)return void Object(r["a"])({type:"danger",message:"未上传整改描述"});this.$httpapi.uploadHandleResult({id:this.HiddenDangerId,handlePicIds:e,handleDescription:this.hidedangerVal,reUploadFlag:String(this.reupload)}).then(e=>{1==e.success?this.$router.go(-2):Object(r["a"])({type:"danger",message:e.message})});break;case 3:if(""==this.reason)return void Object(r["a"])({type:"danger",message:"未输入申述原因"});this.$httpapi.appealApproveHiddenTrouble({businessKey:this.HiddenDangerId,operation:"appeal",opinion:this.reason}).then(e=>{1==e.success?this.$router.go(-2):Object(r["a"])({type:"danger",message:e.message})});break;case 4:if(""==this.deferralDays)return void Object(r["a"])({type:"danger",message:"未输入延期天数"});if(""==this.reason)return void Object(r["a"])({type:"danger",message:"未输入原因"});this.$httpapi.delayApproveHiddenTrouble({id:this.HiddenDangerId,delayDays:this.deferralDays,reason:this.reason,operation:"commit"}).then(e=>{1==e.success?this.$router.go(-2):Object(r["a"])({type:"danger",message:e.message})});break;case 5:if(""==this.RetuenVal)return void Object(r["a"])({type:"danger",message:"未输入原因"});this.$httpapi.recheckApproveHiddenTrouble({businessKey:this.reviewDetailid,operation:"reject",opinion:this.RetuenVal}).then(e=>{1==e.success?this.$router.go(-1):Object(r["a"])({type:"danger",message:e.message})});break;case 6:if(""==this.RetuenVal)return void Object(r["a"])({type:"danger",message:"未输入原因"});this.$httpapi.spotCheckHiddenTrouble({businessKey:this.HiddenDangerId,operation:"reject",opinion:this.RetuenVal}).then(e=>{1==e.success?this.$router.go(-2):Object(r["a"])({type:"danger",message:e.message})});break;default:break}}}},l=d,g=(i("ff83"),i("2877")),p=Object(g["a"])(l,a,s,!1,null,"eefa765e",null);t["default"]=p.exports},dfbc:function(e,t,i){},ff83:function(e,t,i){"use strict";i("dfbc")}}]);